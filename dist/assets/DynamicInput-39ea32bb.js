import{d as U,m as n,B as f,G as _,C as y,E as P,D as O,H as Z,a3 as se,a7 as ee,bJ as ue,a8 as te,ap as de,A as ce,ar as pe,$ as me,a0 as q,al as fe,i as he,J as L,I as re,p as K,L as ge,N as A,aa as Q,O as D,a1 as X,bK as z,bL as E,ak as ye,R as x}from"./index-febb9171.js";import{i as ve,N as G}from"./Input-e98dee29.js";import{u as be,a as Pe}from"./use-locale-07b54378.js";import{A as Y}from"./Add-1d9d2516.js";import{R as Ve}from"./InputNumber-e385578a.js";import{A as Ie}from"./Skeleton-539b4266.js";const Re=U({name:"ArrowUp",render(){return n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n("g",{fill:"none"},n("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),o="0!important",ne="-1px!important";function w(e){return P(e+"-type",[y("& +",[f("button",{},[P(e+"-type",[O("border",{borderLeftWidth:o}),O("state-border",{left:ne})])])])])}function B(e){return P(e+"-type",[y("& +",[f("button",[P(e+"-type",[O("border",{borderTopWidth:o}),O("state-border",{top:ne})])])])])}const $e=f("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[_("vertical",{flexDirection:"row"},[_("rtl",[f("button",[y("&:first-child:not(:last-child)",`
 margin-right: ${o};
 border-top-right-radius: ${o};
 border-bottom-right-radius: ${o};
 `),y("&:last-child:not(:first-child)",`
 margin-left: ${o};
 border-top-left-radius: ${o};
 border-bottom-left-radius: ${o};
 `),y("&:not(:first-child):not(:last-child)",`
 margin-left: ${o};
 margin-right: ${o};
 border-radius: ${o};
 `),w("default"),P("ghost",[w("primary"),w("info"),w("success"),w("warning"),w("error")])])])]),P("vertical",{flexDirection:"column"},[f("button",[y("&:first-child:not(:last-child)",`
 margin-bottom: ${o};
 margin-left: ${o};
 margin-right: ${o};
 border-bottom-left-radius: ${o};
 border-bottom-right-radius: ${o};
 `),y("&:last-child:not(:first-child)",`
 margin-top: ${o};
 margin-left: ${o};
 margin-right: ${o};
 border-top-left-radius: ${o};
 border-top-right-radius: ${o};
 `),y("&:not(:first-child):not(:last-child)",`
 margin: ${o};
 border-radius: ${o};
 `),B("default"),P("ghost",[B("primary"),B("info"),B("success"),B("warning"),B("error")])])])]),we={size:{type:String,default:void 0},vertical:Boolean},Be=U({name:"ButtonGroup",props:we,setup(e){const{mergedClsPrefixRef:c,mergedRtlRef:i}=Z(e);return se("-button-group",$e,c),ee(ue,e),{rtlEnabled:te("ButtonGroup",i,c),mergedClsPrefix:c}},render(){const{mergedClsPrefix:e}=this;return n("div",{class:[`${e}-button-group`,this.rtlEnabled&&`${e}-button-group--rtl`,this.vertical&&`${e}-button-group--vertical`],role:"group"},this.$slots)}}),ke={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"},Ce=()=>ke,Se=de({name:"DynamicInput",common:ce,peers:{Input:ve,Button:pe},self:Ce}),Ae=Se,W=me("n-dynamic-input"),De=U({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:c}=q(W);return{mergedTheme:e,placeholder:c}},render(){const{mergedTheme:e,placeholder:c,value:i,clsPrefix:s,onUpdateValue:m,disabled:d}=this;return n("div",{class:`${s}-dynamic-input-preset-input`},n(G,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:i,placeholder:c,onUpdateValue:m,disabled:d}))}}),Oe=U({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:c,keyPlaceholderRef:i,valuePlaceholderRef:s}=q(W);return{mergedTheme:c,keyPlaceholder:i,valuePlaceholder:s,handleKeyInput(m){e.onUpdateValue({key:m,value:e.value.value})},handleValueInput(m){e.onUpdateValue({key:e.value.key,value:m})}}},render(){const{mergedTheme:e,keyPlaceholder:c,valuePlaceholder:i,value:s,clsPrefix:m,disabled:d}=this;return n("div",{class:`${m}-dynamic-input-preset-pair`},n(G,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s.key,class:`${m}-dynamic-input-pair-input`,placeholder:c,onUpdateValue:this.handleKeyInput,disabled:d}),n(G,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:s.value,class:`${m}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleValueInput,disabled:d}))}}),Ue=f("dynamic-input",{width:"100%"},[f("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[f("dynamic-input-preset-input",{flex:1,alignItems:"center"}),f("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[f("dynamic-input-pair-input",[y("&:first-child",{"margin-right":"12px"})])]),O("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[P("icon",{cursor:"pointer"})]),y("&:last-child",{marginBottom:0})]),f("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[f("form-item-blank",{paddingTop:"0 !important"})])]),M=new WeakMap,Ne=Object.assign(Object.assign({},re.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),ze=U({name:"DynamicInput",props:Ne,setup(e,{slots:c}){const{mergedComponentPropsRef:i,mergedClsPrefixRef:s,mergedRtlRef:m,inlineThemeDisabled:d}=Z(),I=q(fe,null),k=he(e.defaultValue),N=L(e,"value"),h=be(N,k),p=re("DynamicInput","-dynamic-input",Ue,Ae,e,s),T=K(()=>{const{value:t}=h;if(Array.isArray(t)){const{max:r}=e;return r!==void 0&&t.length>=r}return!1}),j=K(()=>{const{value:t}=h;return Array.isArray(t)?t.length<=e.min:!0}),F=K(()=>{var t,r;return(r=(t=i==null?void 0:i.value)===null||t===void 0?void 0:t.DynamicInput)===null||r===void 0?void 0:r.buttonSize});function g(t){const{onInput:r,"onUpdate:value":l,onUpdateValue:a}=e;r&&x(r,t),l&&x(l,t),a&&x(a,t),k.value=t}function C(t,r){if(t==null||typeof t!="object")return r;const l=z(t)?E(t):t;let a=M.get(l);return a===void 0&&M.set(l,a=ye()),a}function S(t,r){const{value:l}=h,a=Array.from(l??[]),b=a[t];if(a[t]=r,b&&r&&typeof b=="object"&&typeof r=="object"){const le=z(b)?E(b):b,oe=z(r)?E(r):r,J=M.get(le);J!==void 0&&M.set(oe,J)}g(a)}function v(){V(-1)}function V(t){const{value:r}=h,{onCreate:l}=e,a=Array.from(r??[]);if(l)a.splice(t+1,0,l(t+1)),g(a);else if(c.default)a.splice(t+1,0,null),g(a);else switch(e.preset){case"input":a.splice(t+1,0,""),g(a);break;case"pair":a.splice(t+1,0,{key:"",value:""}),g(a);break}}function u(t){const{value:r}=h;if(!Array.isArray(r))return;const{min:l}=e;if(r.length<=l)return;const{onRemove:a}=e;a&&a(t);const b=Array.from(r);b.splice(t,1),g(b)}function R(t,r,l){if(r<0||l<0||r>=t.length||l>=t.length||r===l)return;const a=t[r];t[r]=t[l],t[l]=a}function ae(t,r){const{value:l}=h;if(!Array.isArray(l))return;const a=Array.from(l);t==="up"&&R(a,r,r-1),t==="down"&&R(a,r,r+1),g(a)}ee(W,{mergedThemeRef:p,keyPlaceholderRef:L(e,"keyPlaceholder"),valuePlaceholderRef:L(e,"valuePlaceholder"),placeholderRef:L(e,"placeholder")});const ie=te("DynamicInput",m,s),H=K(()=>{const{self:{actionMargin:t,actionMarginRtl:r}}=p.value;return{"--action-margin":t,"--action-margin-rtl":r}}),$=d?ge("dynamic-input",void 0,H,e):void 0;return{locale:Pe("DynamicInput").localeRef,rtlEnabled:ie,buttonSize:F,mergedClsPrefix:s,NFormItem:I,uncontrolledValue:k,mergedValue:h,insertionDisabled:T,removeDisabled:j,handleCreateClick:v,ensureKey:C,handleValueChange:S,remove:u,move:ae,createItem:V,mergedTheme:p,cssVars:d?void 0:H,themeClass:$==null?void 0:$.themeClass,onRender:$==null?void 0:$.onRender}},render(){const{$slots:e,buttonSize:c,mergedClsPrefix:i,mergedValue:s,locale:m,mergedTheme:d,keyField:I,itemStyle:k,preset:N,showSortButton:h,NFormItem:p,ensureKey:T,handleValueChange:j,remove:F,createItem:g,move:C,onRender:S,disabled:v}=this;return S==null||S(),n("div",{class:[`${i}-dynamic-input`,this.rtlEnabled&&`${i}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?n(A,Object.assign({block:!0,ghost:!0,dashed:!0,size:c},this.createButtonProps,{disabled:this.insertionDisabled||v,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>Q(e["create-button-default"],()=>[m.create]),icon:()=>Q(e["create-button-icon"],()=>[n(D,{clsPrefix:i},{default:()=>n(Y,null)})])}):s.map((V,u)=>n("div",{key:I?V[I]:T(V,u),"data-key":I?V[I]:T(V,u),class:`${i}-dynamic-input-item`,style:k},X(e.default,{value:s[u],index:u},()=>[N==="input"?n(De,{disabled:v,clsPrefix:i,value:s[u],parentPath:p?p.path.value:void 0,path:p!=null&&p.path.value?`${p.path.value}[${u}]`:void 0,onUpdateValue:R=>{j(u,R)}}):N==="pair"?n(Oe,{disabled:v,clsPrefix:i,value:s[u],parentPath:p?p.path.value:void 0,path:p!=null&&p.path.value?`${p.path.value}[${u}]`:void 0,onUpdateValue:R=>{j(u,R)}}):null]),X(e.action,{value:s[u],index:u,create:g,remove:F,move:C},()=>[n("div",{class:`${i}-dynamic-input-item__action`},n(Be,{size:c},{default:()=>[n(A,{disabled:this.removeDisabled||v,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,circle:!0,onClick:()=>{F(u)}},{icon:()=>n(D,{clsPrefix:i},{default:()=>n(Ve,null)})}),n(A,{disabled:this.insertionDisabled||v,circle:!0,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:()=>{g(u)}},{icon:()=>n(D,{clsPrefix:i},{default:()=>n(Y,null)})}),h?n(A,{disabled:u===0||v,circle:!0,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:()=>{C("up",u)}},{icon:()=>n(D,{clsPrefix:i},{default:()=>n(Re,null)})}):null,h?n(A,{disabled:u===s.length-1||v,circle:!0,theme:d.peers.Button,themeOverrides:d.peerOverrides.Button,onClick:()=>{C("down",u)}},{icon:()=>n(D,{clsPrefix:i},{default:()=>n(Ie,null)})}):null]}))]))))}});export{ze as N};
