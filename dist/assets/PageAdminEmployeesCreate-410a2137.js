import{i as c,U as i,j as E,k,d as _,o as y,c as U,w as r,g as l,a as e,b,l as R,N as D,f as q,_ as h}from"./index-611e9b0c.js";import{u as x}from"./departments.store-ddc191d6.js";import{u as C}from"./users.store-d1c44c92.js";import{N as u}from"./Input-c7379108.js";import{N as s,a as M}from"./FormItem-856fbc7c.js";import{N as A}from"./DatePicker-c578e912.js";import{N as g}from"./Select-a37c4bef.js";import{N as F}from"./Divider-15a26f45.js";import"./use-locale-88ac332a.js";import"./Suffix-6415451c.js";import"./get-2fdf10cf.js";import"./Forward-5e805774.js";import"./cssr-4e584e7e.js";import"./Empty-c66f08c7.js";function P(){const{getDepartments:f}=x(),n={code:{required:!1,message:"Введите номер пользователя"},lastName:{required:!0,message:"Введите фамилию пользователя"},firstName:{required:!0,message:"Введите имя пользователя"},patronymicName:{required:!0,message:"Введите отчество пользователя"},startWorkDate:{required:!0,message:"Введите дату устройства на работу"},role:{required:!0,message:"Выберите роль"},login:{required:!0,message:"Введите email пользователя"},password:{required:!0,message:"Введите пароль пользователя"}},m=c([]),v=c([{label:"Работник",value:i.EMPLOYEE},{label:"Менеджер",value:i.MANAGER},{label:"Кладовщик",value:i.STORAGE}]),a=E({code:"",lastName:"",firstName:"",patronymicName:"",startWorkDate:null,departments:null,role:i.EMPLOYEE,login:"",password:""});return k(async()=>{const p=await f();p&&p.forEach(d=>{m.value.push({label:d.name,value:d.id})})}),{rules:n,formValues:a,options:m,optionsRoles:v}}const S=_({__name:"FormReg",setup(f){const n=c(),m=C(),{rules:v,formValues:a,options:p,optionsRoles:d}=P();function w(){var N;(N=n.value)==null||N.validate(async t=>{t||await m.employeeReg(a)})}return(N,t)=>(y(),U(e(M),{ref_key:"regFormRef",ref:n,model:e(a),rules:e(v),class:"reg-form"},{default:r(()=>[l(e(s),{label:"Номер сотрудника",path:"code"},{default:r(()=>[l(e(u),{value:e(a).code,"onUpdate:value":t[0]||(t[0]=o=>e(a).code=o),placeholder:"Сгенерируется сам, если оставите незаполненным"},null,8,["value"])]),_:1}),l(e(s),{label:"Фамилия",path:"lastName"},{default:r(()=>[l(e(u),{value:e(a).lastName,"onUpdate:value":t[1]||(t[1]=o=>e(a).lastName=o),placeholder:"Иванов"},null,8,["value"])]),_:1}),l(e(s),{label:"Имя",path:"firstName"},{default:r(()=>[l(e(u),{value:e(a).firstName,"onUpdate:value":t[2]||(t[2]=o=>e(a).firstName=o),placeholder:"Иван"},null,8,["value"])]),_:1}),l(e(s),{label:"Отчество",path:"patronymicName"},{default:r(()=>[l(e(u),{value:e(a).patronymicName,"onUpdate:value":t[3]||(t[3]=o=>e(a).patronymicName=o),placeholder:"Иванович"},null,8,["value"])]),_:1}),l(e(s),{label:"Дата устройства на работу",path:"startWorkDate"},{default:r(()=>[l(e(A),{style:{width:"100%"},"value-format":"yyyy-MM-dd","formatted-value":e(a).startWorkDate,"onUpdate:formattedValue":t[4]||(t[4]=o=>e(a).startWorkDate=o),placeholder:"",type:"date"},null,8,["formatted-value"])]),_:1}),l(e(s),{label:"Отделы",path:"departments"},{default:r(()=>[l(e(g),{value:e(a).departments,"onUpdate:value":t[5]||(t[5]=o=>e(a).departments=o),placeholder:"Выберите какие-нибудь",multiple:"",remote:"",options:e(p)},null,8,["value","options"])]),_:1}),l(e(s),{label:"Роль сотрудника",path:"role"},{default:r(()=>[l(e(g),{value:e(a).role,"onUpdate:value":t[6]||(t[6]=o=>e(a).role=o),placeholder:"",options:e(d)},null,8,["value","options"])]),_:1}),l(e(s),{label:"Логин",path:"login"},{default:r(()=>[l(e(u),{value:e(a).login,"onUpdate:value":t[7]||(t[7]=o=>e(a).login=o),placeholder:""},null,8,["value"])]),_:1}),l(e(s),{label:"Пароль",path:"password"},{default:r(()=>[l(e(u),{value:e(a).password,"onUpdate:value":t[8]||(t[8]=o=>e(a).password=o),type:"password",placeholder:"","show-password-on":"click"},null,8,["value"])]),_:1}),l(e(D),{class:"login-form__button",type:"primary",onClick:t[9]||(t[9]=R(o=>w(),["prevent"]))},{default:r(()=>[b(" Создать ")]),_:1})]),_:1},8,["model","rules"]))}}),V={class:"users-create"},W=_({__name:"PageAdminEmployeesCreate",setup(f){return(n,m)=>(y(),q("div",V,[l(e(F),null,{default:r(()=>[b("Добавить нового сотрудника")]),_:1}),l(S)]))}});const X=h(W,[["__scopeId","data-v-a14f0eeb"]]);export{X as default};
