import{d as g,c as y,a as e,o as u,m as _,N as h,j as v,i as T,w as m,g as i,b as N,l as w,n as S,k as C,f as x,q as b,s as F}from"./index-d984cb3f.js";import{u as k}from"./orderTypes.store-6a13774b.js";import{N as D,a as O}from"./Skeleton-55fba634.js";import{N as R}from"./Input-a24dfb38.js";import{N as U,a as z}from"./FormItem-268ecc52.js";import{N as B}from"./Divider-3b8a0140.js";import"./Suffix-1503a4d0.js";import"./use-locale-a395fdef.js";import"./get-slot-1efb97e5.js";import"./Select-e7814547.js";import"./cssr-8508e2c6.js";import"./Empty-6784262f.js";import"./ChevronRight-6d735159.js";import"./Forward-3e9c650f.js";const M=g({__name:"TableOrderTypes",props:{tableData:{}},emits:["change","remove"],setup(p,{emit:s}){const t=a({change:r=>{s("change",r)},remove:r=>{s("remove",r)}});function a(r){return[{title:"Название",key:"name",sorter:"default"},{title:"Действия",key:"actions",render(n){return[_(h,{type:"default",size:"small",style:{marginRight:"6px"},onClick:()=>r.change({id:n.id,name:n.name})},{default:()=>"Изменить"}),_(h,{type:"error",size:"small",style:{marginRight:"6px"},onClick:()=>r.remove(n.id)},{default:()=>"Удалить"})]}}]}return(r,n)=>(u(),y(e(D),{"single-line":!1,data:r.tableData,columns:e(t),pagination:{pageSize:30},bordered:!0},null,8,["data","columns"]))}});function V(p){const s={name:{required:!0,message:"Введите название типа вывески"}},t=v({name:p});return{rules:s,formValues:t}}const q=g({__name:"FormOrderTypeUpdate",props:{orderType:{}},emits:["changed"],setup(p,{emit:s}){const t=p,a=T(),r=k(),{rules:n,formValues:d}=V(t.orderType.name);async function c(){var l;(l=a.value)==null||l.validate(async o=>{o||(await r.update(t.orderType.id,d),s("changed"))})}return(l,o)=>(u(),y(e(z),{ref_key:"orderTypeFormRef",ref:a,rules:e(n),model:e(d),class:"order-type-create-form"},{default:m(()=>[i(e(U),{label:"Название типа вывески",path:"name"},{default:m(()=>[i(e(R),{value:e(d).name,"onUpdate:value":o[0]||(o[0]=f=>e(d).name=f),placeholder:"НЕОН"},null,8,["value"])]),_:1}),i(e(h),{type:"primary",onClick:o[1]||(o[1]=w(f=>c(),["prevent"]))},{default:m(()=>[N(" Создать ")]),_:1})]),_:1},8,["rules","model"]))}}),$={class:"admin-order-types-all"},Z=g({__name:"PageAdminOrderTypesAll",setup(p){const s=S(),t=k(),a=v({isShow:!1,orderType:{id:NaN,name:""}});function r(l){a.isShow=!0,a.orderType=l}function n(){a.isShow=!1}function d(l){s.confirm(()=>{t.remove(l)})}const c=T(!0);return C(async()=>{await t.request(),c.value=!1}),(l,o)=>(u(),x("div",$,[i(e(B),{"title-placement":"left"},{default:m(()=>[N("Все типы вывесок")]),_:1}),c.value?(u(),y(e(O),{key:0,width:"100%",height:"52px",sharp:!1,text:"",size:"medium",repeat:5})):(u(),y(M,{key:1,"table-data":e(t).orderTypes,onChange:r,onRemove:d},null,8,["table-data"])),i(e(F),{show:a.isShow,"onUpdate:show":o[0]||(o[0]=f=>a.isShow=f)},{default:m(()=>[i(e(b),{style:{width:"600px"}},{default:m(()=>[i(q,{"order-type":a.orderType,onChanged:n},null,8,["order-type"])]),_:1})]),_:1},8,["show"])]))}});export{Z as default};
