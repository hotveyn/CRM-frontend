import{t as i,v as p,bI as c}from"./index-febb9171.js";import{u as m}from"./order.service-af9caac5.js";import{a as y}from"./departments.store-87494bd6.js";import{u as f}from"./orderTypes.store-ef57b4c4.js";const o=m(),a=i(),I=p("orders-work",{state:()=>({orders:[]}),actions:{async request(){this.orders=await o.getWork()},findById(r){return this.orders.find(e=>e.id===r)},async update(r,e){o.update(r,e).then(async()=>{a.order.updated();const s=y(),t=this.findById(r);if(t){if(e.name&&(t.name=e.name),t.comment=e.comment,e.type_id){const d=await f().findById(e.type_id);d&&(t.type=d)}if(e.departments&&e.departments.length){const n=s.findById(e.departments[0].department_id);n&&(t.current_department=n.name)}}}).catch(s=>{s instanceof c&&a.error.custom(s.response.data.message)})}}});export{I as u};
