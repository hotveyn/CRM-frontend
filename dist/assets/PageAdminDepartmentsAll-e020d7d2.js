import{d as g,f as w,g as i,a as t,o as u,m as N,N as f,j as x,k as y,i as k,c as h,w as l,b as S,l as C,n as b,q as D,s as U}from"./index-62384645.js";import{N as B,a as R}from"./Skeleton-a17865c3.js";import{a as _}from"./departments.store-3fc2218e.js";import{N as z}from"./Input-c95d618b.js";import{N as F,a as M}from"./FormItem-9db69890.js";import{N as T}from"./Divider-bdda2be5.js";import"./get-806e042e.js";import"./use-locale-a4cb9846.js";import"./get-slot-1efb97e5.js";import"./Select-8ae686c1.js";import"./cssr-1cbf0123.js";import"./Suffix-86caeb40.js";import"./Empty-6144791c.js";import"./ChevronRight-7e3f7794.js";import"./Forward-d200b360.js";const V={class:"table-departments"},$=g({__name:"TableDepartments",props:{tableData:{}},emits:["remove","change"],setup(d,{emit:o}){const a=n({change:e=>o("change",e),remove:e=>o("remove",e)});function n(e){return[{title:"Название",key:"name",sorter:"default"},{title:"Действия",key:"actions",render(r){return[N(f,{type:"default",size:"small",style:{marginRight:"6px",width:"100%",maxWidth:"100px"},onClick:()=>e.change(r.id)},{default:()=>"Изменить"}),N(f,{type:"error",size:"small",style:{marginRight:"6px",marginTop:"6px",width:"100%",maxWidth:"100px"},onClick:()=>e.remove(r.id)},{default:()=>"Удалить"})]}}]}return(e,r)=>(u(),w("div",V,[i(t(B),{"single-line":!1,data:e.tableData,columns:t(a),pagination:{pageSize:30},bordered:!0},null,8,["data","columns"])]))}});function q(d){const o={name:{required:!0,message:"Введите название отдела"}},a=x({name:""});return y(()=>{const e=_().findById(d);e&&(a.name=e.name)}),{rules:o,formValues:a}}const I=g({__name:"FormDepartmentUpdate",props:{id:{}},emits:["changed"],setup(d){const o=d,a=k(),n=_(),{rules:e,formValues:r}=q(o.id);function c(){var p;(p=a.value)==null||p.validate(async s=>{s||await n.update(o.id,r)})}return(p,s)=>(u(),h(t(M),{ref_key:"departmentUpdateRef",ref:a,model:t(r),rules:t(e),class:"department-update-form"},{default:l(()=>[i(t(F),{label:"Название отдела",path:"name"},{default:l(()=>[i(t(z),{value:t(r).name,"onUpdate:value":s[0]||(s[0]=m=>t(r).name=m),placeholder:"Пайка"},null,8,["value"])]),_:1}),i(t(f),{class:"login-form__button",type:"primary",onClick:C(c,["prevent"])},{default:l(()=>[S(" Сохранить ")]),_:1},8,["onClick"])]),_:1},8,["model","rules"]))}}),A={class:"admin-departments-all"},te=g({__name:"PageAdminDepartmentsAll",setup(d){const o=b(),a=_(),n=x({isShow:!1,id:NaN}),e=k(!0);y(async()=>{await a.request(),e.value=!1});function r(s){n.isShow=!0,n.id=s}function c(){n.isShow=!1}function p(s){o.confirm(()=>{a.remove(s)})}return(s,m)=>(u(),w("div",A,[i(t(T),{"title-placement":"left"},{default:l(()=>[S("Все отделы")]),_:1}),e.value?(u(),h(t(R),{key:0,width:"100%",height:"52px",sharp:!1,text:"",size:"medium",repeat:5})):(u(),h($,{key:1,"table-data":t(a).departments,onChange:r,onRemove:p},null,8,["table-data"])),i(t(U),{show:n.isShow,"onUpdate:show":m[1]||(m[1]=v=>n.isShow=v)},{default:l(()=>[i(t(D),{style:{width:"600px"}},{default:l(()=>[i(I,{id:n.id,onChanged:m[0]||(m[0]=v=>c())},null,8,["id"])]),_:1})]),_:1},8,["show"])]))}});export{te as default};
