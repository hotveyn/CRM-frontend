import{i as f,j as N,k as g,d as _,o as c,c as C,w as n,g as t,a as e,b as v,l as P,N as x,f as F,_ as k}from"./index-49ec2185.js";import{u as S}from"./prefab.store-1882e1b4.js";import{u as w}from"./orderTypes.store-9147d02d.js";import{N as d}from"./Input-cc5e470d.js";import{N as u,a as B}from"./FormItem-d507d9a1.js";import{N as I}from"./InputNumber-fe0e6615.js";import{N as U}from"./Select-d0f19fad.js";import{N as V}from"./Divider-8538a625.js";import"./use-locale-f97c94a0.js";import"./Suffix-5f37c512.js";import"./Add-ef72f79c.js";import"./cssr-307dd1f4.js";import"./Empty-fcb2b52c.js";function q(){const p={name:{required:!0,message:"Введите название шаблона"},type_id:{required:!0,message:"Выберите тип шаблона"},price:{required:!0,message:"Введите цену шаблона"}},o=f([]),l=N({name:"",comment:"",price:1,type_id:void 0});return g(async()=>{const i=w();o.value=await i.getForSelect(),o.value[0]&&(l.type_id=o.value[0].value)}),{rules:p,formValues:l,options:o}}const A=_({__name:"FormPrefabCreate",setup(p){const o=f(),l=S(),{rules:i,formValues:r,options:b}=q();async function y(){var m;(m=o.value)==null||m.validate(async a=>{a||await l.create(r)})}return(m,a)=>(c(),C(e(B),{ref_key:"prefabFormRef",ref:o,rules:e(i),model:e(r)},{default:n(()=>[t(e(u),{label:"Название шаблона",path:"name"},{default:n(()=>[t(e(d),{value:e(r).name,"onUpdate:value":a[0]||(a[0]=s=>e(r).name=s),placeholder:""},null,8,["value"])]),_:1}),t(e(u),{label:"Стоимость шаблона",path:"price"},{default:n(()=>[t(e(I),{min:.1,value:e(r).price,"onUpdate:value":a[1]||(a[1]=s=>e(r).price=s),placeholder:"",precision:2},null,8,["value"])]),_:1}),t(e(u),{label:"Тип шаблона",path:"type_id"},{default:n(()=>[t(e(U),{value:e(r).type_id,"onUpdate:value":a[2]||(a[2]=s=>e(r).type_id=s),remote:"",options:e(b)},null,8,["value","options"])]),_:1}),t(e(u),{label:"Комментарий к шаблону"},{default:n(()=>[t(e(d),{value:e(r).comment,"onUpdate:value":a[3]||(a[3]=s=>e(r).comment=s),type:"textarea",placeholder:""},null,8,["value"])]),_:1}),t(e(x),{type:"primary",onClick:a[4]||(a[4]=P(s=>y(),["prevent"]))},{default:n(()=>[v(" Создать ")]),_:1})]),_:1},8,["rules","model"]))}}),T={class:"admin-prefab-create"},M=_({__name:"PageAdminPrefabsCreate",setup(p){return(o,l)=>(c(),F("div",T,[t(e(V),null,{default:n(()=>[v("Добавить новый шаблон")]),_:1}),t(A)]))}});const Q=k(M,[["__scopeId","data-v-af8ab992"]]);export{Q as default};
