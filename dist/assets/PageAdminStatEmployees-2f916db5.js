import{d as f,f as y,g as i,a,m as g,o as r,v as S,i as d,p as u,k,z as h,w as b,h as c,c as _,b as w,_ as N}from"./index-16c8c699.js";import{a as x}from"./Select-17150864.js";import{N as D,a as E}from"./Skeleton-78601b56.js";import{u as B}from"./stat.service-7b014dd8.js";import{N as P}from"./Divider-83f7740d.js";import{N as T}from"./DatePicker-ac391bd9.js";import"./use-locale-c61c26dc.js";import"./cssr-f76ec62b.js";import"./Suffix-0db10a3f.js";import"./Empty-bc98c478.js";import"./get-slot-1efb97e5.js";import"./ChevronRight-ab09ccdf.js";import"./Forward-81f3c204.js";import"./Input-83a63403.js";const q={class:"table-stat-employee"},z=f({__name:"TableStatEmployees",props:{tableData:{}},setup(n){function e(){return[{title:"Номер",key:"code",sorter:"default"},{title:"ФИО",key:"full_name",sorter:"default"},{title:"Завершённые этапы",key:"stages",sorter:"default"},{title:"Брак",key:"stages_break",sorter:"default"},{title:"Процент брака",key:"break_percent",sorter:"default"},{title:"Отделы",key:"departments",render(t){return t.departments.map(s=>g(x,{style:{marginRight:"6px"},type:"info",bordered:!1},{default:()=>s.name}))}}]}return(t,s)=>(r(),y("div",q,[i(a(D),{data:t.tableData,"single-line":!1,columns:e(),pagination:{pageSize:30},bordered:!0},null,8,["data","columns"])]))}}),A=B(),C=S("stat-employees",{state:()=>({stat:[]}),actions:{async request(n,e){this.stat=await A.getEmployeesStat(n,e)}}}),I={class:"admin-stat-employees"},M={class:"date-range",style:{"margin-bottom":"30px"}},O={class:"admin-stat-employees__table"},V=f({__name:"PageAdminStatEmployees",setup(n){const e=C(),t=d(!0),s=Date.now()-26784e5,o=d([s,Date.now()]),m=u(()=>new Date(o.value[0]).toISOString()),l=u(()=>new Date(o.value[1]).toISOString());return k(async()=>{await e.request(m.value,l.value),t.value=!1}),h(l,async()=>{await e.request(m.value,l.value)}),($,p)=>(r(),y("div",I,[i(a(P),{"title-placement":"left"},{default:b(()=>[w("Статистика по сотрудникам")]),_:1}),c("div",M,[i(a(T),{value:o.value,"onUpdate:value":p[0]||(p[0]=v=>o.value=v),type:"daterange"},null,8,["value"])]),c("div",O,[t.value?(r(),_(a(E),{key:0,width:"100%",height:"52px",sharp:!1,text:"",size:"medium",repeat:5})):(r(),_(z,{key:1,"table-data":a(e).stat},null,8,["table-data"]))])]))}});const ee=N(V,[["__scopeId","data-v-d2f410c5"]]);export{ee as default};
