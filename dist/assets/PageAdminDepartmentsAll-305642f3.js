import{d as _,f as y,g as i,a as t,o as u,m as N,N as f,j as k,k as w,i as S,c as h,w as m,b as C,l as b,n as x,q as D,s as U}from"./index-49ec2185.js";import{N as B,a as R}from"./Skeleton-b23cf947.js";import{a as g}from"./departments.store-270a0ea0.js";import{N as z}from"./Input-cc5e470d.js";import{N as F,a as M}from"./FormItem-d507d9a1.js";import{N as V}from"./Divider-8538a625.js";import"./Suffix-5f37c512.js";import"./use-locale-f97c94a0.js";import"./get-slot-1efb97e5.js";import"./Select-d0f19fad.js";import"./cssr-307dd1f4.js";import"./Empty-fcb2b52c.js";import"./ChevronRight-2a8d5f06.js";import"./Forward-57b45e3a.js";const $={class:"table-departments"},q=_({__name:"TableDepartments",props:{tableData:{}},emits:["remove","change"],setup(d,{emit:o}){const a=n({change:e=>o("change",e),remove:e=>o("remove",e)});function n(e){return[{title:"Название",key:"name",sorter:"default"},{title:"Действия",key:"actions",render(r){return[N(f,{type:"default",size:"small",style:{marginRight:"6px"},onClick:()=>e.change(r.id)},{default:()=>"Изменить"}),N(f,{type:"error",size:"small",style:{marginRight:"6px"},onClick:()=>e.remove(r.id)},{default:()=>"Удалить"})]}}]}return(e,r)=>(u(),y("div",$,[i(t(B),{"single-line":!1,data:e.tableData,columns:t(a),pagination:{pageSize:30},bordered:!0},null,8,["data","columns"])]))}});function I(d){const o={name:{required:!0,message:"Введите название отдела"}},a=k({name:""});return w(()=>{const e=g().findById(d);e&&(a.name=e.name)}),{rules:o,formValues:a}}const T=_({__name:"FormDepartmentUpdate",props:{id:{}},emits:["changed"],setup(d){const o=d,a=S(),n=g(),{rules:e,formValues:r}=I(o.id);function c(){var p;(p=a.value)==null||p.validate(async s=>{s||await n.update(o.id,r)})}return(p,s)=>(u(),h(t(M),{ref_key:"departmentUpdateRef",ref:a,model:t(r),rules:t(e),class:"department-update-form"},{default:m(()=>[i(t(F),{label:"Название отдела",path:"name"},{default:m(()=>[i(t(z),{value:t(r).name,"onUpdate:value":s[0]||(s[0]=l=>t(r).name=l),placeholder:"Пайка"},null,8,["value"])]),_:1}),i(t(f),{class:"login-form__button",type:"primary",onClick:b(c,["prevent"])},{default:m(()=>[C(" Сохранить ")]),_:1},8,["onClick"])]),_:1},8,["model","rules"]))}}),A={class:"admin-departments-all"},ee=_({__name:"PageAdminDepartmentsAll",setup(d){const o=x(),a=g(),n=k({isShow:!1,id:NaN}),e=S(!0);w(async()=>{await a.request(),e.value=!1});function r(s){n.isShow=!0,n.id=s}function c(){n.isShow=!1}function p(s){o.confirm(()=>{a.remove(s)})}return(s,l)=>(u(),y("div",A,[i(t(V),{"title-placement":"left"},{default:m(()=>[C("Все отделы")]),_:1}),e.value?(u(),h(t(R),{key:0,width:"100%",height:"52px",sharp:!1,text:"",size:"medium",repeat:5})):(u(),h(q,{key:1,"table-data":t(a).departments,onChange:r,onRemove:p},null,8,["table-data"])),i(t(U),{show:n.isShow,"onUpdate:show":l[1]||(l[1]=v=>n.isShow=v)},{default:m(()=>[i(t(D),{style:{width:"600px"}},{default:m(()=>[i(T,{id:n.id,onChanged:l[0]||(l[0]=v=>c())},null,8,["id"])]),_:1})]),_:1},8,["show"])]))}});export{ee as default};
