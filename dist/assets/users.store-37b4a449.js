import{t as h,v as d,x as m}from"./index-49ec2185.js";import{a as p}from"./departments.store-270a0ea0.js";const a=m(),r=h(),y=d("users",{state:()=>({users:[],touched:!1}),actions:{async getOrRequest(){return this.touched||(this.users=await a.getAll(),this.touched=!0),this.users},async request(){this.users=await a.getAll(),this.touched=!0},async fire(s){a.fire(s).then(()=>{r.user.fire()}).catch(e=>{r.error.custom(e.response.data.message)}),this.users=this.users.filter(e=>e.id!==s)},async employeeReg(s){a.employeeReg(s).then(()=>{r.user.reg()}).catch(e=>{r.error.custom(e.response.data.message)})},async update(s,e){a.update(s,e).then(()=>{var u;r.user.updated();const i=p();for(const t in this.users)if(this.users[t].id===s){this.users[t].code=e.code,this.users[t].code=e.code,this.users[t].last_name=e.lastName,this.users[t].first_name=e.firstName,this.users[t].patronymic_name=e.patronymicName,this.users[t].start_work_date=e.startWorkDate,this.users[t].departments=[],(u=e.departments)==null||u.forEach(o=>{var c;const n=i.findById(o);console.log(o,n),n&&((c=this.users[t].departments)==null||c.push(n))});break}}).catch(i=>{r.error.custom(i.response.data.message)})},findById(s){return this.users.find(e=>e.id===s)}}});export{y as u};
