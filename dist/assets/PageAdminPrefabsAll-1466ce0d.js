import{d as g,f as w,g as o,a as e,o as c,m as N,N as b,i as h,j as S,k as C,c as _,w as l,b as x,l as U,n as P,q,s as D}from"./index-3479dd01.js";import{u as F}from"./prefab.store-6adc7331.js";import{N as R,a as T}from"./Skeleton-c3879c1d.js";import{u as z}from"./orderTypes.store-69725f2e.js";import{N as B}from"./InputNumber-1736ecba.js";import{N as k}from"./Input-bda83dc5.js";import{N as v,a as M}from"./FormItem-0449d637.js";import{N as V}from"./Select-1f7edc5b.js";import{N as $}from"./Divider-e31872c8.js";import"./Suffix-cc808f9e.js";import"./use-locale-ad4756e2.js";import"./get-slot-1efb97e5.js";import"./ChevronRight-08fa84b8.js";import"./Forward-150f3a5e.js";import"./Empty-9a754558.js";import"./Add-39e399b0.js";import"./cssr-95788e2e.js";const A={class:"table-prefabs-all"},I=g({__name:"TablePrefabsAll",props:{tableData:{}},emits:["change","remove"],setup(i,{emit:p}){const s=a({change:t=>p("change",t),remove:t=>p("remove",t)});function a(t){return[{title:"Название",key:"name",sorter:"default"},{title:"Тип",key:"type.name",sorter:"default"},{title:"Стоимость",key:"price",sorter:"default"},{title:"Комментарий",key:"comment",sorter:"default"},{title:"Действия",key:"actions",width:110,render(u){return[N(b,{type:"default",size:"small",style:{marginRight:"6px"},onClick:()=>t.change(u)},{default:()=>"Изменить"}),N(b,{type:"error",size:"small",style:{marginRight:"6px"},onClick:()=>t.remove(u.id)},{default:()=>"Удалить"})]}}]}return(t,u)=>(c(),w("div",A,[o(e(R),{"single-line":!1,data:t.tableData,columns:e(s),pagination:{pageSize:30},bordered:!0},null,8,["data","columns"])]))}});function j(i){const p={name:{required:!0,message:"Введите название шаблона"},type_id:{required:!0,message:"Выберите тип шаблона"},price:{required:!0,message:"Введите цену шаблона"}},s=h([]),a=S({name:i.name,comment:i.comment,price:i.price,type_id:void 0});return C(async()=>{const t=z();s.value=await t.getForSelect(),a.type_id=+i.type_id}),{rules:p,formValues:a,options:s}}const E=g({__name:"FormPrefabUpdate",props:{prefab:{}},emits:["changed"],setup(i,{emit:p}){const s=i,a=h(),t=F(),{rules:u,formValues:n,options:y}=j(s.prefab);async function d(){var f;(f=a.value)==null||f.validate(async r=>{r||(await t.update(s.prefab,n),p("changed"))})}return(f,r)=>(c(),_(e(M),{ref_key:"prefabFormRef",ref:a,rules:e(u),model:e(n)},{default:l(()=>[o(e(v),{label:"Название шаблона",path:"name"},{default:l(()=>[o(e(k),{value:e(n).name,"onUpdate:value":r[0]||(r[0]=m=>e(n).name=m),placeholder:""},null,8,["value"])]),_:1}),o(e(v),{label:"Стоимость шаблона",path:"price"},{default:l(()=>[o(e(B),{min:.1,value:e(n).price,"onUpdate:value":r[1]||(r[1]=m=>e(n).price=m),placeholder:"",precision:2},null,8,["value"])]),_:1}),o(e(v),{label:"Тип шаблона",path:"type_id"},{default:l(()=>[o(e(V),{value:e(n).type_id,"onUpdate:value":r[2]||(r[2]=m=>e(n).type_id=m),remote:"",options:e(y)},null,8,["value","options"])]),_:1}),o(e(v),{label:"Комментарий к шаблону"},{default:l(()=>[o(e(k),{value:e(n).comment,"onUpdate:value":r[3]||(r[3]=m=>e(n).comment=m),type:"textarea",placeholder:""},null,8,["value"])]),_:1}),o(e(b),{type:"primary",onClick:r[4]||(r[4]=U(m=>d(),["prevent"]))},{default:l(()=>[x(" Создать ")]),_:1})]),_:1},8,["rules","model"]))}}),L={class:"admin-order-types-all"},le=g({__name:"PageAdminPrefabsAll",setup(i){const p=P(),s=F(),a=S({isShow:!1,prefab:{id:NaN,name:"",comment:"",price:1,type_id:1,type:{id:1,name:"default"}}}),t=h(!0);function u(d){a.isShow=!0,a.prefab=d}function n(){a.isShow=!1}function y(d){p.confirm(()=>{s.remove(d)})}return C(async()=>{await s.request(),t.value=!1}),(d,f)=>(c(),w("div",L,[o(e($),{"title-placement":"left"},{default:l(()=>[x("Все типы вывесок")]),_:1}),t.value?(c(),_(e(T),{key:0,width:"100%",height:"52px",sharp:!1,text:"",size:"medium",repeat:5})):(c(),_(I,{key:1,"table-data":e(s).prefabs,onChange:u,onRemove:y},null,8,["table-data"])),o(e(D),{show:a.isShow,"onUpdate:show":f[0]||(f[0]=r=>a.isShow=r)},{default:l(()=>[o(e(q),{style:{width:"600px"}},{default:l(()=>[o(E,{prefab:a.prefab,onChanged:n},null,8,["prefab"])]),_:1})]),_:1},8,["show"])]))}});export{le as default};
