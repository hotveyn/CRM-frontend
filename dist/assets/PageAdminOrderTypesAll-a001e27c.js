import{d as g,c as y,a as e,o as u,m as _,N as h,j as v,i as T,w as m,g as l,b as N,l as x,n as k,k as S,f as C,q as b,s as F}from"./index-62384645.js";import{u as w}from"./orderTypes.store-cd2a7c53.js";import{N as D,a as O}from"./Skeleton-a17865c3.js";import{N as R}from"./Input-c95d618b.js";import{N as U,a as z}from"./FormItem-9db69890.js";import{N as B}from"./Divider-bdda2be5.js";import"./get-806e042e.js";import"./use-locale-a4cb9846.js";import"./get-slot-1efb97e5.js";import"./Select-8ae686c1.js";import"./cssr-1cbf0123.js";import"./Suffix-86caeb40.js";import"./Empty-6144791c.js";import"./ChevronRight-7e3f7794.js";import"./Forward-d200b360.js";const M=g({__name:"TableOrderTypes",props:{tableData:{}},emits:["change","remove"],setup(p,{emit:s}){const a=t({change:r=>{s("change",r)},remove:r=>{s("remove",r)}});function t(r){return[{title:"Название",key:"name",sorter:"default"},{title:"Действия",key:"actions",render(n){return[_(h,{type:"default",size:"small",style:{marginRight:"6px",width:"100%",maxWidth:"100px"},onClick:()=>r.change({id:n.id,name:n.name})},{default:()=>"Изменить"}),_(h,{type:"error",size:"small",style:{marginRight:"6px",marginTop:"6px",width:"100%",maxWidth:"100px"},onClick:()=>r.remove(n.id)},{default:()=>"Удалить"})]}}]}return(r,n)=>(u(),y(e(D),{"single-line":!1,data:r.tableData,columns:e(a),pagination:{pageSize:30},bordered:!0},null,8,["data","columns"]))}});function V(p){const s={name:{required:!0,message:"Введите название типа вывески"}},a=v({name:p});return{rules:s,formValues:a}}const q=g({__name:"FormOrderTypeUpdate",props:{orderType:{}},emits:["changed"],setup(p,{emit:s}){const a=p,t=T(),r=w(),{rules:n,formValues:d}=V(a.orderType.name);async function c(){var i;(i=t.value)==null||i.validate(async o=>{o||(await r.update(a.orderType.id,d),s("changed"))})}return(i,o)=>(u(),y(e(z),{ref_key:"orderTypeFormRef",ref:t,rules:e(n),model:e(d),class:"order-type-create-form"},{default:m(()=>[l(e(U),{label:"Название типа вывески",path:"name"},{default:m(()=>[l(e(R),{value:e(d).name,"onUpdate:value":o[0]||(o[0]=f=>e(d).name=f),placeholder:"НЕОН"},null,8,["value"])]),_:1}),l(e(h),{type:"primary",onClick:o[1]||(o[1]=x(f=>c(),["prevent"]))},{default:m(()=>[N(" Создать ")]),_:1})]),_:1},8,["rules","model"]))}}),$={class:"admin-order-types-all"},ee=g({__name:"PageAdminOrderTypesAll",setup(p){const s=k(),a=w(),t=v({isShow:!1,orderType:{id:NaN,name:""}});function r(i){t.isShow=!0,t.orderType=i}function n(){t.isShow=!1}function d(i){s.confirm(()=>{a.remove(i)})}const c=T(!0);return S(async()=>{await a.request(),c.value=!1}),(i,o)=>(u(),C("div",$,[l(e(B),{"title-placement":"left"},{default:m(()=>[N("Все типы вывесок")]),_:1}),c.value?(u(),y(e(O),{key:0,width:"100%",height:"52px",sharp:!1,text:"",size:"medium",repeat:5})):(u(),y(M,{key:1,"table-data":e(a).orderTypes,onChange:r,onRemove:d},null,8,["table-data"])),l(e(F),{show:t.isShow,"onUpdate:show":o[0]||(o[0]=f=>t.isShow=f)},{default:m(()=>[l(e(b),{style:{width:"600px"}},{default:m(()=>[l(q,{"order-type":t.orderType,onChanged:n},null,8,["order-type"])]),_:1})]),_:1},8,["show"])]))}});export{ee as default};
