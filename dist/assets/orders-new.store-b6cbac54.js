import{t as d,v as c}from"./index-49ec2185.js";import{u as n}from"./order.service-bec46c7e.js";import{u as i}from"./orderTypes.store-9147d02d.js";const o=n(),t=d(),y=c("orders-new",{state:()=>({orders:[]}),actions:{async request(){this.orders=await o.getNew()},async remove(r){o.remove(r).then(()=>{t.order.removed(),this.orders=this.orders.filter(e=>e.id!==r)}).catch(e=>t.error.custom(e.response.data.message))},async toWork(r,e){o.setWork(r,e).then(()=>{t.order.toWork(),this.orders=this.orders.filter(s=>s.id!==r)}).catch(s=>t.error.custom(s.response.data.message))},findById(r){return this.orders.find(e=>e.id===r)},async update(r,e){o.update(r,e).then(async()=>{t.order.updated();const s=this.findById(r),a=await i().findById(e.type_id);s&&(s.name=e.name,s.type=a,s.price=e.price,s.comment=e.comment)}).catch(s=>t.error.custom(s.response.data.message))},async create(r){o.create(r).then(e=>{t.order.created(),this.orders.push(e)}).catch(e=>t.error.custom(e.response.data.message))},async createByPrefab(r){o.createByPrefab(r).then(e=>{t.order.created(),this.orders.push(e)}).catch(e=>t.error.custom(e.response.data.message))}}});export{y as u};
